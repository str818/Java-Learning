# 一、并发的发展历史

## 1. 真空管和穿孔打卡

操作员在机房里面来回调度资源，计算机同一时刻只能运行一个程序，在程序输入的过程中，计算机处于空闲状态。

## 2. 晶体管和批处理器

计算机通过读取磁带的指令来进行运算。

批处理操作系统虽然能够解决计算机的空闲问题，但是当某一个作业因为等待磁盘或者其他 I/O 操作而暂停时，CPU 就只能阻塞直到该 I/O 操作完成。

## 3. 集成电路和多道程序设计

把内存分为几个部分，每一个部分存放不同的程序。当一个程序需要等待 I/O 操作完成时，CPU 可以切换执行内存中的另外一个程序。

这时引入了「进程」的概念，进程的本质是一个正在执行的程序，程序运行时会创建一个进程，并且给每个进程分配独立的内存地址空间保证每个进程地址不会相互干扰。同时，在 CPU 对进程做时间片的切换时，保证进程切换过程中仍然要从进程之前运行的位置处开始执行，所以进程通常还会包括程序计数器、堆栈指针。

并发的实现时通过 CPU 时间片不断切换执行的。对于单核 CPU 来说，在任意一个时刻只会有一个进程被 CPU 调度。

## 4. 线程的出现

有了进程以后，为什么还会发明线程呢？

- 在多核 CPU 中，利用多线程可以实现真正意义上的并行执行。
- 在一个应用进程中，会存在多个同时执行的任务，如果其中一个任务被阻塞，将会引起不依赖该任务的任务也被阻塞。 通过对不同任务创建不同的线程去处理，可以提升程序处理的实时性。
- 线程可以认为是轻量级的进程，所以线程的创建、销毁比进程更快。